# Проект "Banking-transaction-analyzer"

## Описание:

"Banking-transaction-analyzer" - это учебный проект по Python. 

Проект содержит код для разработки приложения анализа банковских транзакций. 
Приложение генерирует JSON-данные для веб-страниц, формирует Excel-отчеты, предоставляет различные сервисы.

## Установка:

1. Клонируйте репозиторий проекта:
````
git clone https://github.com/nadezhdapopova-spec/banking-transaction-analyzer.git
````
2. Установите зависимости внутри каталога проекта:
````
poetry install
````

## Использование:

Анализ и выгрузка данных о транзакциях пользователей производятся из Excel-файлов.

* **read_transactions_excel:** функция для считывания данных о финансовых транзакциях из XLSX-файлов

### В проекте реализованы функции для получения данных веб-страниц: 
### **"Главная"**

* **get_greeting:** возвращает приветствие в зависимости от текущего времени


* **get_date_obj_information:** получение диапазона дат для фильтрации транзакций


* **filter_transactions:** получение списка финансовых транзакций в опреденном диапазоне дат


* **get_card_spent_cashback:** получение общей суммы расходов, кешбэка по каждой карте

Пример работы функции:
````
# выход функции

    {
      "last_digits": "5814",
      "total_spent": 1262.00,
      "cashback": 12.62
    },
    {
      "last_digits": "7512",
      "total_spent": 7.94,
      "cashback": 0.08
    }
````

* **get_top_five_transactions:** получение топ-5 транзакций по сумме платежа

Пример работы функции:
````
# выход функции

    {
      "date": "21.12.2021",
      "amount": 1198.23,
      "category": "Переводы",
      "description": "Перевод Кредитная карта. ТП 10.2 RUR"
    },
    {
      "date": "20.12.2021",
      "amount": 829.00,
      "category": "Супермаркеты",
      "description": "Лента"
    }
````

* **get_currency_rates:** получение данных о курсе заданных валют к рублю

Пример работы функции:
````
# выход функции

    {
      "currency": "USD",
      "rate": 73.21
    },
    {
      "currency": "EUR",
      "rate": 87.08
    }
````

* **get_stock_prices:** получение данных о cтоимости заданных акций из S&P500 в рублях

Пример работы функции:
````
# выход функции

    {
      "stock": "AMZN",
      "price": 3173.18
    },
    {
      "stock": "GOOGL",
      "price": 2742.39
    }
````

### **"События"**

**Расходы**


* **get_total_expenses:** получение общей суммы расходов в опреденном диапазоне дат

Пример работы функции:
````
# выход функции

"total_amount": 32101
````

* **get_top_categories_expenses:** получение суммы расходов по 7 основным категориям и категории «Остальное»

Пример работы функции:
````
# выход функции

    {
        "category": "Супермаркеты",
        "amount": 17319
      },
      {
        "category": "Фастфуд",
        "amount": 3324
    },
      {
        "category": "Топливо",
        "amount": 2289
      },
      {
        "category": "Развлечения",
        "amount": 1850
      },
      {
        "category": "Медицина",
        "amount": 1350
      },
      {
        "category": "Остальное",
        "amount": 2954
      }
````

* **get_transfers_and_cash_expenses:** получение суммы расходов по категориям «Наличные» и «Переводы»

Пример работы функции:
````
# выход функции

    {
        "category": "Наличные",
        "amount": 500
      },
      {
        "category": "Переводы",
        "amount": 200
      }
````

**Доходы**


* **get_total_income:** получение общей суммы поступлений в опреденном диапазоне дат

Пример работы функции:
````
# выход функции

"total_amount": 54271
````

* **get_top_categories_income:** получение суммы поступлений по категориям

````
# выход функции

    {
        "category": "Пополнение_BANK007",
        "amount": 33000
      },
      {
        "category": "Проценты_на_остаток",
        "amount": 1242
      },
      {
        "category": "Кэшбэк",
        "amount": 29
      }
````

### В проекте содержатся функции для реализации «Сервисов»:

* **get_profitable_cashback_categories:** анализ категорий кэшбэка за указанный период


* **make_simple_search:** поиск по запросу в описании или категории


* **search_for_transfers_to_individuals:** поиск транзакций, относящихся к переводам физлицам


### В проекте содержатся функции для реализации «Отчетов»:

* **get_spending_by_category:** получение транзакций по категории за последние три месяца от заданной даты.


* **report:** функция-декоратор для записи отчетов в файл


В проекте настроено логирование для отслеживания работы функций


## Тестирование:
Для функций и декоратора реализованы юнит-тесты, покрытие составляет 100%

#### Запуск тестов:
```bash
pytest tests/ -v
```

## Лицензия:

Проект распространяется под [лицензией MIT](https://github.com/nadezhdapopova-spec/client-banking-widget/blob/main/LICENSE)
